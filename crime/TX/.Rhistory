data$t_f = ifelse(data$AGE_NUM.x == data$AGE_NUM.y, "yes", "no")
data$t_f = ifelse(AGE_NUM.x == AGE_NUM.y, "yes", "no")
data$t_f = ifelse(data$AGE_NUM.x == data$AGE_NUM.y, "yes", "no")
data$t_f = data$AGE_NUM.x - data$AGE_NUM.y
data$AGE_NUM.x
data["AGE_NUM.x"]
data$AGE_NUM.x
library(readr)
library(dplyr)
offender = read_csv("NIBRS_OFFENDER.csv")
victim = read_csv("NIBRS_VICTIM.csv")
victim_offense = read_csv("NIBRS_VICTIM_OFFENSE.csv")
incident = read_csv("NIBRS_incident.csv")
arrestee = read_csv("NIBRS_ARRESTEE.csv")
names(offender)
library(lubridate)
incident = incident %>% dplyr::select(INCIDENT_ID, INCIDENT_DATE, INCIDENT_HOUR, SUBMISSION_DATE)
incident$SUBMISSION_DATE = dmy(incident$SUBMISSION_DATE)
incident$INCIDENT_DATE = dmy(incident$INCIDENT_DATE)
incident$submission_time = incident$SUBMISSION_DATE - incident$INCIDENT_DATE
incident = incident %>% select(-INCIDENT_DATE, -SUBMISSION_DATE)
arrestee = arrestee %>% dplyr::select(ARRESTEE_ID, INCIDENT_ID, ARREST_DATE, OFFENSE_TYPE_ID, AGE_ID, AGE_NUM, ETHNICITY_ID, SEX_CODE, RESIDENT_CODE, RACE_ID)
victim_offense = victim_offense %>% select(-DATA_YEAR)
victim = victim %>% select(VICTIM_ID, INCIDENT_ID, VICTIM_SEQ_NUM, VICTIM_TYPE_ID, AGE_ID, AGE_NUM, SEX_CODE, RACE_ID, ETHNICITY_ID, RESIDENT_STATUS_CODE)
offender = offender %>% select(OFFENDER_ID, INCIDENT_ID, OFFENDER_SEQ_NUM, AGE_ID, AGE_NUM, SEX_CODE, RACE_ID, ETHNICITY_ID)
data = inner_join(victim, offender, by = "INCIDENT_ID") %>% na.omit()
library(ggplot2)
data %>% ggplot()+
geom_point(aes(x = AGE_NUM.x, y = AGE_NUM.y))
table(data$AGE_NUM.x, data$AGE_NUM.y)
library(lsa)
install.packages("lsa")
lsa::cosine(data$AGE_NUM.x, data$AGE_NUM.y)
offender %>% group_by(RACE_ID) %>% summarise(count = n(), mean = mean(AGE_NUM, na.rm = T), median = median(AGE_NUM, na.rm = T))
install.packages("lsa")
offender %>% filter(RACE_ID == 2) %>% group_by(AGE_NUM) %>% summarise(count = n()) %>% ggplot()+
geom_bar(aes(x = AGE_NUM, y = count), stat = "identity")
offender %>% filter(RACE_ID == 1) %>% group_by(AGE_NUM) %>% summarise(count = n()) %>% ggplot()+
geom_bar(aes(x = AGE_NUM, y = count), stat = "identity")
offender %>% filter(RACE_ID == 3) %>% group_by(AGE_NUM) %>% summarise(count = n()) %>% ggplot()+
geom_bar(aes(x = AGE_NUM, y = count), stat = "identity")
offender %>% filter(RACE_ID == 4) %>% group_by(AGE_NUM) %>% summarise(count = n()) %>% ggplot()+
geom_bar(aes(x = AGE_NUM, y = count), stat = "identity")
offender %>% filter(RACE_ID == 8) %>% group_by(AGE_NUM) %>% summarise(count = n()) %>% ggplot()+
geom_bar(aes(x = AGE_NUM, y = count), stat = "identity")
data$t_f = ifelse(data$AGE_NUM.x == data$AGE_NUM.y, "yes", "no")
data %>% group_by(t_f) %>% summarise(count = n())
data$t_f = ifelse(abs(data$AGE_NUM.x - data$AGE_NUM.y)<3, "yes", "no")
data %>% group_by(t_f) %>% summarise(count = n())
data$t_f = ifelse(abs(data$AGE_NUM.x - data$AGE_NUM.y)<5, "yes", "no")
data %>% group_by(t_f) %>% summarise(count = n())
data$t_f = ifelse(abs(data$AGE_NUM.x - data$AGE_NUM.y)<10, "yes", "no")
data %>% group_by(t_f) %>% summarise(count = n())
data$age_x = round(data$AGE_NUM.x/5)
data$age_x = round(data$AGE_NUM.x/5)*5
data$age_y = round(data$AGE_NUM.y/5)*5
lsa::cosine(data$age_x. data$age_y)
lsa::cosine(data$age_x, data$age_y)
data$age_x
data$age_x = round(data$AGE_NUM.x/10)*10
data$age_y = round(data$AGE_NUM.y/10)*10
lsa::cosine(data$age_x, data$age_y)
cor(data$age_x, data$age_y)
cor(data$AGE_NUM.x, data$AGE_NUM.y)
library(Hmisc)
install.packages("Hmisc")
library(Hmisc)
rcorr(data, type="pearson")
cor(data$AGE_NUM.x, data$AGE_NUM.y)
cov(data$AGE_NUM.x, data$AGE_NUM.y)
cor(data$AGE_NUM.x, data$AGE_NUM.y)
cor(data$AGE_NUM.x, data$AGE_NUM.y)
write.csv(data, "/c/Users/Duy/Desktop/Mainor_2/crime/TX/tx2017.csv")
write.csv(data, "/c/Users/Duy/Desktop/Mainor_2/crime/TX/tx2017.csv", row.names = FALSE)
write.csv(data, "C:\Users\Duy\Desktop\Mainor_2\crime\TX\tx2017.csv", row.names = FALSE)
write.csv(data, "C:/Users/Duy/Desktop/Mainor_2/crime/TX/tx2017.csv", row.names = FALSE)
library(readr)
library(dplyr)
offender = read_csv("NIBRS_OFFENDER.csv")
victim = read_csv("NIBRS_VICTIM.csv")
victim_offense = read_csv("NIBRS_VICTIM_OFFENSE.csv")
incident = read_csv("NIBRS_incident.csv")
arrestee = read_csv("NIBRS_ARRESTEE.csv")
names(offender)
library(lubridate)
incident = incident %>% dplyr::select(INCIDENT_ID, INCIDENT_DATE, INCIDENT_HOUR, SUBMISSION_DATE)
incident$SUBMISSION_DATE = dmy(incident$SUBMISSION_DATE)
incident$INCIDENT_DATE = dmy(incident$INCIDENT_DATE)
incident$submission_time = incident$SUBMISSION_DATE - incident$INCIDENT_DATE
incident = incident %>% select(-INCIDENT_DATE, -SUBMISSION_DATE)
arrestee = arrestee %>% dplyr::select(ARRESTEE_ID, INCIDENT_ID, ARREST_DATE, OFFENSE_TYPE_ID, AGE_ID, AGE_NUM, ETHNICITY_ID, SEX_CODE, RESIDENT_CODE, RACE_ID)
victim_offense = victim_offense %>% select(-DATA_YEAR)
victim = victim %>% select(VICTIM_ID, INCIDENT_ID, VICTIM_SEQ_NUM, VICTIM_TYPE_ID, AGE_ID, AGE_NUM, SEX_CODE, RACE_ID, ETHNICITY_ID, RESIDENT_STATUS_CODE)
offender = offender %>% select(OFFENDER_ID, INCIDENT_ID, OFFENDER_SEQ_NUM, AGE_ID, AGE_NUM, SEX_CODE, RACE_ID, ETHNICITY_ID)
data = inner_join(victim, offender, by = "INCIDENT_ID") %>% na.omit()
library(ggplot2)
data %>% ggplot()+
geom_point(aes(x = AGE_NUM.x, y = AGE_NUM.y))
table(data$AGE_NUM.x, data$AGE_NUM.y)
write.csv(data, "C:/Users/Duy/Desktop/Mainor_2/crime/TX/tx2017.csv", row.names = FALSE)
