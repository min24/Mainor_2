---
title: "Lab04. Text mining: Dictionaries, sentiment analysis and topic modelling"
output: html_document
---

???? ???????? ???????????? ???????????????????? ???????????????? ?? ???????????????? ????????????.

??????????????????????: ?????????? ?????????????????? ?? ?????????????????????? ?????????? ?????????? ?? ?????????? ?????? tidytext <https://www.tidytextmining.com/>

?? ???????????????? ?????????? ?? ?????????????? ???? ?????????????? ???? ??????????.

```{r}
library(readr)
reviews = read_csv("C:/Users/Duy/Desktop/Mainor_2/2_seminars/lab03-tm/reviews.csv")  
# ?? ?????????????? lem ?????????????????????????????????? ???????????? + ?????? ???????????????????? ?? ??????????
```

?????????????? ?????? ???? ?????????????? ?????????????? ???????? (?? ?????? ?????????? tf-idf -- ???????????), ????????????????, ?????? ???? ???????????????? ?????????? ???????????????????? ???????????????????? ?????????????????? ???????????????????? ???????????? (???????????? ???????????????????????????? ??????????) ?? ?????????? ???????????? (?????????????? ?? ???????????????????????? ?????????????????? ????????), ???????????? ?????????????? ????????????.

?????????????????? ????????????, ?????????????? ?????? ??????????????????????. 

```{r}
library(tidytext)
library(ggplot2)
library(wordcloud2)
library(RColorBrewer)
library(tidyr)
library(stringr)
library(dplyr)
rustopwords = data.frame(words=c(stopwords::stopwords("ru"), "??????"), stringsAsFactors=FALSE)
```

????????????????????: ?????????????????? ???? ?????????? ???????????? ?????????? ?? ????????????????????, ?????????? ????????????, ???????????????????? ???? ??????????-???? ???????? (?????????????????? ??????)

```{r eval = FALSE}
# ?????????? ???? ??????????
quotes = reviews %>%
  unnest_tokens(words, quote)

# ?????????????? ????????-??????????
quotes = quotes %>%
  anti_join(rustopwords)

# ?????????????? ??????????????
quotes = quotes %>%
  dplyr::count(words, sort = TRUE) %>% ungroup()
  
quotes %>% 
  filter(n > 100) %>%
  mutate(word = reorder(words, n)) %>% # ?????????? ?????????????????????? ???? ??????????????
  ggplot(aes(word, n)) +
  geom_bar(stat = "identity") +
  xlab(NULL) +
  coord_flip() # ?????????? ???????????? ?????????? ???????? ??????????????
```

???????????? ???????? ?????? ?? ????????????????????? ????????????? ???????????? ???????????? ?????????????????????? ???? ????????????:
```{r}
ggplot(data=reviews,aes(x=rating)) + geom_bar()
```

?????????????? ??????????????????, ???????????????????? ???? ?????????????????????? ?? ?????????????? ????????????????. ?? ???????? ?????????? ???? ?????????????????? ???????????? ?? ?????????????????? ???????????? 3 ?? ?????????????????? ???????????? 5. ???? ???????????????????? ???????????? ???????? ???? ???????? ???????? ??????????????????. ???? ?????? ???????????????? ???????????????? ?????? ?????????????????? ???????????????????????????

```{r}
reviews_tokens = reviews %>%
  unnest_tokens(words, lem) %>% anti_join(rustopwords)

rating2 = filter(reviews_tokens, rating < 3)
rating2 = rating2 %>% count(words)
rating2 = filter(rating2, n < 200)

wordcloud2(data = rating2)

rating5 = filter(reviews_tokens, rating == 5)
rating5 = rating5 %>% count(words)
rating5 = filter(rating5, n < 300)

wordcloud2(data = rating5)
```

?????? ?? ?????????????? ???????????????????? ?????????????????? (bar plot):

```{r}
rating2 %>% 
  filter(n > 50) %>%
  mutate(word = reorder(words, n)) %>%
  ggplot(aes(word, n)) +
  geom_bar(stat = "identity") +
  xlab(NULL) +
  coord_flip()

rating5 %>% 
  filter(n > 250) %>%
  mutate(word = reorder(words, n)) %>%
  ggplot(aes(word, n)) +
  geom_bar(stat = "identity") +
  xlab(NULL) +
  coord_flip()
```

# ?????????????????? ???? ??????????

??????-???? ???????? ???? ?????????? ??????????????. ???? ?????????????? ??????????????????, ?????????? ???? ???? ???????????????????? ???????????????????????? ???????? ???? ???????????????????? ??????????. ?????????????? ?????????????? -- ????????????????, ?????? ?? ???????????? ?????????????? ???????? ?????????????? ?????? ?????????????????????? ?????????????????????? (?????? ?????? ??????)

???????????????? ???????????? ???????????????????? ?????? ????????

```{r}
sights =c("??????????????", "??????????", "??????????????", "????????????????????????", "??????????????????????????????????????????", "????????")
transport = c("??????????", "????????????", "????????????????", "??????????", "??????????????", "????????????????????", "????????????????", "????????????")
meal = c("??????", "??????", "??????????????", "??????", "????????????????", "????????", "????????????????")
furniture = c("????????????","??????????","??????????????")
```

??????????????????, ????????????????, ???? ??????????????????. ???????????? ???????????????? ?????????? ????, ?????? ?? ?????? ?????????????????????? -- ?????????????????? ???????????? ???? ??????????, ?????? ?????? ??????????????????. ???? ???????????????? ?????????????????????????? ???????????? ???????? ?? data.frame, ?????????? ???????????????????????? ???????????????? _join

```{r}
transport_df = data.frame(words = transport, stringsAsFactors = F)
reviews_trans = reviews_tokens %>% 
  inner_join(transport_df)
```

?? ???????????? ?????????????? ???????????? ????????????. ?????????????? ???????????????? ???? ????, ?????? ?????????????? ?? ?????????????? ???????????????? ?? ?????? ???????????? ????????????????????
```{r}
# ?????????? ?????? ??????????????????
trans_count = reviews_trans %>% count(rating)

# ?????????? ???????? ?? ???????????? ???????????? ???? ????????????
reviews_total = reviews_tokens %>% count(rating)

trans_count$prop = trans_count$n/reviews_total$n

ggplot(data = trans_count) + geom_bar(aes(x = rating, y = prop), stat = "identity")
```

???????????? ???????????????????? ?????????????? ???????????? ???????????????? -- ?????? ?????????????????? ???? ???????????????????? ????????????????, ?? ?????????????????????????? ?????????????????????????? ???? ????????, ??.??. ??????, ????????????????, ?? ???????????????? ?????????????? ???????????? ?????????????? ?????? ??????, ?? ???? ?????? ??????????????????

???????????????? ?????? ???????????? ?????? ?????????? ?? ???????? ??????????????????
```{r}
interests = data.frame(words = c(sights, transport, meal, furniture), stringsAsFactors = F)
interests$topic = c(rep("sights", length(sights)), 
                    rep("transport", length(transport)), 
                    rep("meal", length(meal)), 
                    rep("furnitute", length(furniture)))

```

?????????????????? ???????????? ????
```{r}
reviews_topics = reviews_tokens %>% 
  inner_join(interests)
```

?????????????? ???? ???????????? ???????? ?? ????????????

```{r}
topic_count = reviews_topics %>% count(topic, rating)
```

```{r}
ggplot(data = topic_count) + 
  geom_bar(aes(x = rating, y = n, fill = topic), 
           stat = "identity", position = "fill")
```

?????? ???? ???????????? ?????????????? ?????? ???????????? ?? ?????????????? ?????????????????

**??????????????**:

???????????????????? ???????????????? ?? ?????????? ???? ?????????????? ??????????, ?? ???? ???? ???????????? ?? ????????????. ???????? ???? ???????????????? ?? ?????????????????????

## ???????????? ???????????? ?? ???????????? (Sentiment analysis)

?????????? ?????????? ???? ?????????????? ?????????? ?????????????????????????? ????????????????????, ??.??. ?????????????????? ?????????? ???????????????????? ?????? ???????????????????? (??????????????, ???????????????? ?? ??.??.). ???????????????? ???????????????? -- ?????? ?????????? ?????????????????????????????? ???????????? ???????? (??????????????). ?????? ?????????????????????? ????, ????????????????, ???????????????????? ??????????, ???? ?????? ?????????? ?????????? ????????????????, ?????? ?????????????????????????? ???????????? ???? ???????????? ???????????? ????????????????. ?????????? ?????????????? ?????????? ???????????? ???????????????? ?????????? ?? ???????? ?????? ?????????? ????????????, ?? ?????????? ???????????? ??????????-???? ???????????? (?????????? "??????????????????????" ?????????? ????????????????????????, ?????? "??????????????")

?????????????????? ???????????????????????????????? ?????????????????????????? ?????????????? (????????????, sentiment) ?????????????? ?????? ??????????. ?????? ?????????? ?????????????? ?????????? ???????????????????????? ?????????????? ?????????????????? ?????????????? ????????????????????.

```{r}
sentdict <- read.table("C:/Users/Duy/Desktop/Mainor_2/2_seminars/lab04-sent_topics/sentdict.txt", header=T, stringsAsFactors=F) # ?????????????? ?????????????????? ??????????????

head(sentdict)
tail(sentdict)
```

??????, ?????? ?????????????? ???????????? ???? ?????????? ??????????????????, ?????????????????? ?????????????????? ???????????????? ???? ?????????? -- ?????? ???????????????? ?? ?????????????????? (???????????????????? ?????? ????????????????????). 

```{r}
reviews.sent = reviews_tokens %>% 
  inner_join(sentdict, by = "words") #???????????? ???????????????????????? inner_join, ?? ???? anti_join?

reviews.sent_count = reviews.sent %>% 
  group_by(id) %>% 
  summarise(mean = mean(value)) #??????????????????

reviews.sent_count %>% arrange(-mean) %>% head() # ?????????? ?????????????????? ????????????
reviews$review[reviews$id == "rn280308837"]

reviews.sent_count %>% arrange(mean) %>% head() # ?????????? ?????????????????????? ????????????
reviews$review[reviews$id == "rn219370699"]
```

???? ?????? ???? ?????????????? ?????????? ??????????-???? ???????????? ???????? "????????????????????-????????????????????". 

* ?????? ?????????? ???????????????? ???????????????? ?????????????? ?????? ?????????????

???????? ???? ?????????????????? -- ???????????????????????? ?????????????????? ???????????? ?? ???????????????? (????????????????, ????????????). ???? ?????????? ???????????????????? ?????????????? ???????? ?????????????????????? ?????? ?????????? ???????????? ??????????????????-??????????????.

?????????????? ???? ?????????????????????????? ???????????? ?????? ????, ?????? ???????????? ?????????? ???? 1-2 ??????????, ?? ?????????????????????????? -- ???? 5. ?????????????????? ?????????????????????????? ???????????? ?????????????????????? 

```{r}
reviews %>% ggplot() + geom_bar(aes(rating)) + theme_bw()

#???????????????? ?????????? ???? ???????????????????? ??????????????
positive = reviews.sent %>% filter(id %in% reviews$id[reviews$rating==5]) %>% mutate(sent = "positive")

#???????????????? ?????????? ???? ???????????????????? ??????????????
negative = reviews.sent %>% filter(id %in% reviews$id[reviews$rating<3]) %>% mutate(sent = "negative")

#?????????????????? ???????????? ?? ???????????????????? positive ?? negative ?? ?????????????????? ??????????????
reviews.pmi = rbind(positive, negative) %>% dplyr::select(-id,-value)
reviews.pmi = reviews.pmi %>% dplyr::count(words, sent) %>% spread(sent, n, fill = 0)
```

?????????????? ?????????????????? ?????????? ???? ?????????????? ????????????????????, ?????????????????????? ?????? ?????????????? ???? ?????????????? ?? ?????????????? Pointwise Mutual Information (PMI) -- ?????????? "????????????????????", ???????? ?????? ???????? ?????????????????????? ?? ?????????????????????????? ??????????????, ?????? ?? ?????????????????????????? (?? ?????????????????? ???? ????, ?????? ?????????? ?????? ?????????????????????? ?? ??????????) . 

```{r}
freq_p = reviews.pmi$positive
freq_n = reviews.pmi$negative
sum_p = sum(reviews.pmi$positive) 
sum_n = sum(reviews.pmi$negative) 

pmi_p = log((freq_p/sum_p)/((freq_p+freq_n)/(sum_p+sum_n)*sum_p/(sum_p+sum_n))+1, base=2)
reviews.pmi$PMI_p = pmi_p

pmi_n = log((freq_n/sum_n)/((freq_p+freq_n)/(sum_p+sum_n)*sum_n/(sum_p+sum_n))+1, base=2)
reviews.pmi$PMI_n = pmi_n

reviews.pmi %>% 
  ggplot(aes(x=positive+negative, y=PMI_p-PMI_n, color=5*PMI_p-PMI_n, label=words)) +
  scale_color_gradient2(low="red", high="blue") +
  geom_point()

reviews.pmi %>% 
  ggplot(aes(x=positive+negative, y=PMI_p-PMI_n, color=5*PMI_p-PMI_n, label=words)) +
  scale_color_gradient2(low="red", high="blue") +
  geom_text(check_overlap = TRUE) 
```

???? ???????? pmi_p ?? ?????????? ???????????????? ???????????????????? ?????????????????? ?????????? "????????????????????????" ???????????????? ??????????????, ?? pmi_n -- ?????????????????? ?????? "??????????????????"

**??????????????**

1. ?????? ???????????????????? ???????????????????? ?????????????? ?????? ?????????? ???????? ?????????????? ???? ???????????????????????? ???????????? ???????????? ?? ???????????????? 1-2 ?? 5. ???????????? ???????? ???????????? - ?????????????????? ???????? ???????????????? ?????????????????? ?????????????? ????????????????????????????/???????????????????????????? ???????????????????? ?????? ???????? ?????????????? ???? ???????? ?? ???????????????? 3-4. ??????????????????: ?????????????????????? PMI_p ?? PMI_n ?? ???????????????? ???????? ??????????????????????. ?????????????????? ?????????????????? ?????????????????? (scatterplot) ?? ???????????????????????????? ???????? ?????????????? ???? ?????????????? ??????????????????????.

2(*). ??????????????, ?????????? ?????????? ???????????????? ???????????????????? ?????? ?????????????????????????? (1-2) ?? ?????????????????????????? (5) ??????????????, ???? ???????????????????????????? ???????????? ???????????????? ???? ?????????????? ????????????????????, ?? ???????????????? ???????????? ???????????? ??????????????. ?????????????????? ???????????? ???????? ?? ?????????????????? ??????????????????, ????????????????????????????, ?????????? ?????????? ???????????????????? ?????? ?????????????? ???????????? ??????????????.

## N-????????????

???????? ?????? ???????????????? ?????????????????? ???????????? ?? ?????? ???????? ?????????????????? ??????????. ?????? ?????????? ???? ?????????????????? ???????????????????????? ???????????????????? ?? ???????????????????????????????????? ???????? ?? ????????????. ???? ???????? ?????????????? ?????????????????? ?????????????????????????? ?????????????????? ?????? ???????????????? «???????????? ????????» (bag of words), ???????????? ?????? ???? ?????????????????????????? ?????????? ????????, ???? ???? ???? ??????????????. ???????????? ???????? ?????????????? ????????????, ?????????????????????????? ???? ?????????? ?????????? ???????????????????????? ?????????????????? ????????????, ?????????????????????????????? ?? ?????? ???????????????????? ?? ???????????????????????????????????? ???????? - *n-????????????*. ???????????? ???????????? ?????????? ?????????????? ?? ???????????????? ?????????????? ?????????????????? ?????????????? ???????????? ????????. 

```{r}
library(tidyverse)
library(tidytext)

reviews.bigrams = reviews %>% 
  unnest_tokens(bigram, lem, token = "ngrams", n = 2)

reviews.bigrams %>% 
  dplyr::count(bigram, sort = TRUE)


rustopwords = data.frame(words=c(stopwords::stopwords("ru"), "??????", "??", "??", "????", "??"), stringsAsFactors=FALSE)
reviews.bifiltered = reviews.bigrams %>% 
  separate(bigram, c("word1", "word2"), sep = " ") %>% 
  dplyr::filter(!word1 %in% rustopwords$words) %>% 
  dplyr::filter(!word2 %in% rustopwords$words) 

reviews.bifiltered %>% 
  dplyr::select(word1, word2) %>% 
  dplyr::count(word1, word2, sort = TRUE)

reviews.bifiltered %>% 
  filter(word2 == "??????????") %>% 
  dplyr::count(word1, word2, sort=TRUE) %>%
  dplyr::select(word1, word2, n)

reviews.bifiltered %>% 
  filter(word2 == "??????????") %>% 
  dplyr::count(rating, word1, sort=TRUE) %>% 
  filter(rating<3)

reviews.bigrams = reviews.bifiltered %>% 
  unite(bigram, word1, word2, sep = " ")
```



**??????????????**

1. ???????????????????? ???????????????? ?????? ???????? ???? ???????????????????????? ???????????????? + ????????????????

```{r}
sights =c("??????????????", "??????????", "??????????????", "????????????????????????", "??????????????????????????????????????????", "????????")
# transport = c("??????????", "????????????", "????????????????", "??????????", "??????????????", "????????????????????", "????????????????", "????????????")
# meal = c("??????", "??????", "??????????????", "??????", "????????????????", "????????", "????????????????")
# furniture = c("????????????","??????????","??????????????")

reviews.bifiltered %>% 
  filter(word1 %in% sights | word2 %in% sights) %>% 
  dplyr::count(rating, word1, word2, sort=TRUE)


###??????????????????????????
reviews.trigrams = reviews %>% 
  unnest_tokens(bigram, lem, token = "ngrams", n = 3)

reviews.trigrams %>% 
  dplyr::count(bigram, sort = TRUE)

reviews.bifiltered = reviews.trigrams %>% 
  separate(bigram, c("word1", "word2", "word3"), sep = " ") %>% 
  filter(!word1 %in% stopwords::stopwords("ru")) %>% 
  filter(!word2 %in% stopwords::stopwords("ru")) %>%
  filter(!word3 %in% stopwords::stopwords("ru"))

reviews.bifiltered %>% 
  dplyr::select(word1, word2, word3) %>% 
  dplyr::count(word1, word2, word3, sort = TRUE)

reviews.bifiltered %>% 
  filter(word1 == "??????????????") %>% 
  dplyr::count(word1, word2,word3, sort=TRUE) %>%
  dplyr::select(word1, word2,word3, n)

reviews.bifiltered %>% 
  filter(word2 == "??????????") %>% 
  dplyr::count(rating, word1, sort=TRUE) %>% 
  filter(rating>3)

reviews.trigrams = reviews.bifiltered %>% 
  unite(bigram, word1, word2,word3, sep = " ")
```


## ???????????????????????? ??????????????????????????

?????? ?????????? ?????????????????? ???????? ?????????????? ?????? ?????????????? ???????????????????? ???? ????????????????????, ?? ?????? ?????????? ?????????????????? ???????? ?????????????? ???? ???????????

???????????????????????? ???????????? ?????????????????? ??????????????: ?????????????? ?????????????????? ????????????????????. ?????????? ???????????????????? «????????», ???? ?????????????? ?????? ????????????????????????.

LDA (Latent Dirichlet Allocation):

* ???????????? ???????????????? ???????????????????????? ?????????? ?????????? ??????.
* «????????» - ?????????? ????????, ?????????????? ?????????? ?? ?????????????? ?????????????????????????? ?????????????????????????? ?????? ???????????????????? ???????????? ????????.

????????????????????????????, ?? ?????????????? ?????????????????? ?? ?????????????????? - ???????? ?????????????????????????? ?????? (?? ?????????? ?????????????????? ???????????????????????? ???????????? ?????????????????? ???????? ??????????????????).

![](http://journalofdigitalhumanities.org/wp-content/uploads/2013/02/blei_lda_illustration.png)

???????????? ???????????????????? ?? ???????????????????????? ??????????????????????????:

* [Topic modelling in Text Mining with R](http://tidytextmining.com/topicmodeling.html)
* [topicmodels package](https://cran.r-project.org/web/packages/topicmodels/vignettes/topicmodels.pdf)

?????????? ???????????????????? ????????????????????????, ?????????????? ?????? ?????????????????? ???? ??????????, ???? ???? ?????????????????? ??????????????????

### ???????? ?????? ?????????? ????????

???????????????? ???? ?????? ???????? ?? ?????????????????? ???? ?????????? ???????????????????? ?????????? ?? ???????????? ????????.

![](https://pp.userapi.com/c847216/v847216868/1ac1df/9r1YIVdfD1s.jpg)

?? ??????????????????, ???? ???????????? ???????????? ???????????? ??????????????, ?????? ???????? ???????????????????? ???????? ???? ??????????, ???????? ??????????, ?????????????? ?????????????????????? ?? ???????????? ???? ??????. ?????? ?????????????????? ?????? ?????????? ?????????? ?????????? ??????????????????, ?????????????????? ?????????????????????????? ???????? ???????????????? ?????????? ????????????. ?????? ?????????? ???????????????????? ???????????????? ?????????????????? ???????????????????????? $log_{2}(\beta_{1}/\beta_{2})$ (???????? $\beta_{1}$ ?? ?????? ???????? ????????????, ???? ?????? ???????????????? ?????????? 1, ???????? ????????????????, ???? -1).

?????? ?????????? ?????????????? ?????? ?????? ?????????

![](https://pp.userapi.com/c847216/v847216868/1ac1e6/c3sp5NTwyjw.jpg)

### ?????????????????? ?????? ?????????? ??????

???????????? ?????????? ?? ?????? ?????? ???????? ?????????????????? ?????????????????? ?? ???????????? ???? ??????. ????????????????, ???? 60% ?? ????????????, ?? ???? 40% -- ???? ????????????


# ??????????????: ???????????? ??????????????????????


??????????????, ?????????????? ???? ?????????? ??????????????????????????, ?????? ???????? ???? 1617 ?????????????????????? ???????????? ?? ?????????? ??????, ???????????????????? ?????????? "peacekeeper" ?? ???????????????????? ?? ???????????????????? ?????????? 2001 ?? 2016 ????????????. ?? ???????????? ???????????????????? ???????????????? ?????????????????????????? ???????????? (id), ???? ???????????????? (title), ?????????? ???????????? (text) ?? ?????????????????????????????????? ?????????? (text_lem).

```{r}
news = read.csv("~/shared/minor2_2018/2-tm-net/lab04-sent_topics/UN_news_peacekeepers.csv", stringsAsFactors=FALSE)
```

# ?????????????? 1

???????????? ?????????????? ?????????????????? ?????????????? ?????????????????????? ???????? ???? ??????????????. 
?????? ????????????????????: 

1. ???????????????????????????? ????????????. ???????????????? ?????????????? ?????????? ??????????

2. ?????????????????? ???????????????????? ???????????????????? ???????? ?? ?????????????? 

3. ?????????????? ?????????????????? 

```{r}
# ???????????? ???????????????? ???? ????????????????????
stopwords("en")
```

4. ?????????????????? ?????? ?????????? ?????????????????????? ???????????? ??????????

```{r}
words_count = ... %>% 
  dplyr::count(...) 
```

5. ?????????????? ?????????????? ???????????? (n < 5) ??, ????????????????, ?????????????? ???????????????????????????????? ?????????? (1% ?????????? ?????????????????????????? ????????) 

6. ???????????????????????????? 15 ?????????? ?????????????????????????? ???????? ???? ?????????????????????? ????????????. ???????????????? ?????? ?? ?????????????? ???????????????????? ?????????????????? (bar chart) ?????? ???????????? ????????

# ?????????????? 2. TF-IDF ?? Cosine similarity

???????????? ???? ?????????????????? ?? ?????????????? ?????????????????? ?????????????????????????? ???? ??????????????. ???????????? ???? ?????????????????? ?????????? ???????????? ???? ???????????????? ????????????.

?????????????????? ???????????????? ?? ?????????????????? ??????????, ?????????????? ???? ?????????????? ?? ???????????????????? ?????????????? ???????? ?????????????? ??????????????????:

1. ?????????????? ?????????????????? ???????????? ?? ?????????????? ???????????????? ???????????? 5 ????????

2. ?????????????????? ?????????????? TF-IDF ?????? ?????????????????? ???????????????????? ?????????????????????? ???????? (bind_tf_idf())
* TF - term frequency (?????????????? ?????????? ?? ??????????????????) 
* IDF - inverse documemnt frequency (???????????????? ?????????????????????? ??????????????:
  ???????????????? ?????????????????? ???????????????????? ???????????????????? ?? ?????????????????? ?? ??????????
  ????????????????????, ?? ?????????????? ?????????????????????? ???????????? ??????????)
  
3. ???????????????? ???????????? ?? ???????????????? ?????????????? (term-document matrix) (spread())

4. ???????????????? ?? ?????????? ???????????????????? ?????????????????????????????? ????????, ?????? ?????????? ???????????? ???????????? ?? ????????????????????????????????, ?????????????????????? ?? ???????????????????? texts_id:

```{r}
texts_id = c("253", "252", "917", "901", "904", "910")
```

5. ?????????????????? ???????????????????? ???????????????????? ?????? ???????????? ???????? ?????????????? ?? ???????? ???????? (?????????????? lsa::cosine). ?????????? ???????????? ???????????????? ?????????????? ???????? ???? ??????????. ???????????????? ???? ????????????????. ?? ?????? ???????

# ?????????????? 3. Sentiment analysis

?????????????????? ???????????????????????????????? ?????????????????????????? ?????????????? (????????????) ???????????? ?????? ??????????????????????. 
?????? ?????????? ???? ?????????????????????????? ????????????????, ?????????????? ???????????????????? AFINN. ?? ?????? ???????????? ?????????????????????????? ???????????????? ???????????? ???? ?????????????????????????????? ???? -5 (???????????? ????????????????????) ???? 5 (???????????? ????????????????????).

```{r}
sentdict = get_sentiments("afinn")

head(sentdict)
tail(sentdict)
```

1. ?????????? ?????????? ?????????????????????? ???????? ???????????? ?? ??????????????????????, ???????????????????????? ?? ?????????????????? ?????????? ?????????????? ?? ?????????????? ????????????????????.  

2. ???????????????????????? ?????????????? ???? ???????????????? ?????????????? ???????????????????? ?????? ???????????? ????????????

3. ?????????????? ?????? ?????????? ???????????????????? ????????????. ???????????????? ???? ????????????????

4. ?????????????? ?????? ?????????? ???????????????????? ????????????. ???????????????? ???? ????????????????


